/*
 * IndustryTree.h
 *
 *  Created on: Oct 11, 2014
 *      Author: root
 */

#ifndef INDUSTRYTREE_H_
#define INDUSTRYTREE_H_

#include <string>
#include <fstream>
#include <iostream>
#include <exception>
#include <map>
#include <sstream>
#include <algorithm>
#include <iterator>
#include "IndustryInfo.h"

using namespace std;

namespace Algorithms {

class IndustryTree {
public:

	IndustryTree(string fileName);
	virtual ~IndustryTree();
	bool addCompanies(string fileName);
	bool addIndustries(string fileName);
    bool removeCompanies(string fileName);
    bool truncate(); // removes childless industries


private:
	IndustryInfo* m_pRoot;
	bool parseIndustries (string fileName);
    string getCompanyKey(CompanyInfo *);
    // the industry key is the industry name. The assumption is that the industry names
    // are unique
    map<string, IndustryInfo*> m_mapIndustries;
    // the company key is the pair "[industry name]:[company name]"
    map<string, CompanyInfo*> m_mapCompanies;

};

} /* namespace Algorithms */

#endif /* INDUSTRYTREE_H_ */
