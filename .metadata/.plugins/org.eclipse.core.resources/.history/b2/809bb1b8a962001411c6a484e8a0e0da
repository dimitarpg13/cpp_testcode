//============================================================================
// Name        : Test3.cpp
// Author      : Dimitar Gueorguiev
// Version     :
// Copyright   : Your copyright notice
// Description : Hello World in C++, Ansi-style
//============================================================================

#include <iostream>
#include <string>

using namespace std;

template<typename Iter, typename Val>
Val accumulate2(Iter first, Iter last, Val s)
{
	while (first != last)
	{
		s = s + *first;
		++first;
	}

	return s;
}

struct Entry
{
   string name;
   int number;

};

ostream& operator<<(ostream& os, const Entry& e)
{
	return os << "{\"" << e.name << "\", " << e.number << "}";
}

istream& operator>>(istream& is, Entry& e)
{
	char c, c2;
	if (is>>c && c=='{' && is>>c2 && c2=='"')
	{
       string name ;
       while (is.get(c) && c!='"')
    	   name += c;

       if (is>>c && c==',')
       {
    	   int number = 0;
    	   if (is>>number>>c && c=='}')
    	   {
    		   e = {name,number};
    		   return is;
    	   }
       }
	}

	is.setstate(ios_base::failbit);
	return is;
}


int main() {
//	double ad[] = {1.1,2.2,3.3,4.4};
//
//
//	double s1 = accumulate2(ad,ad+4,0.0);
//	cout << "The result from accumulate over double is " << s1 << endl;
//	int s2 = accumulate2(ad,ad+4,0);
//	cout << "The result from accumulate over int is " << s2 << endl;
//
//	cout << "!!!Hello World!!!" << endl; // prints !!!Hello World!!!
	return 0;
}
