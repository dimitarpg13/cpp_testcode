/*
 * Problem.h
 *
 *  Created on: Sep 5, 2015
 *      Author: Dimitar Gueorguiev
 */

#ifndef PUZZLE_H_
#define PUZZLE_H_

#include "Symbol.h"
#include "Line.h"
#include "Region.h"
#include "Parser.h"

using namespace std;

namespace sudoku
{

class Puzzle
{

private:
   int m_iDim;

   HorizLine ** m_pRows;
   VertLine ** m_pCols;
   Region ** m_pRegions;
   Parser * m_pParser;

   long long m_lError;

   void init()
   {

       m_pRegions = new Region* [m_iDim];
       for (int i = 0; i < m_iDim; i++)
    	   m_pRegions[i] = new Region();


       m_pParser = new Parser(m_iDim,'.');

   }

   bool process_parsed_config();

public:
   static const int CLASSIC_SUDOKU_DIM = 9;

   Puzzle()
   {
	  m_iDim = CLASSIC_SUDOKU_DIM;

	  init();
   }

   Puzzle(int dim) : m_iDim(dim)
   {
       init();
   }

   ~Puzzle()
   {
	   for (int i = 0; i < m_iDim; i++)
		   delete m_pRows[i];
	   delete [] m_pRows;

	   for (int i = 0; i < m_iDim; i++)
		   delete m_pCols[i];
	   delete [] m_pCols;

	   for (int i = 0; i < m_iDim; i++)
		   delete m_pRegions[i];
	   delete [] m_pRegions;


	   delete m_pParser;

   }


   bool load(string inputFile)
   {
      bool res = m_pParser->parse(inputFile);


	  return res;
   }



};

}

#endif /* PUZZLE_H_ */
