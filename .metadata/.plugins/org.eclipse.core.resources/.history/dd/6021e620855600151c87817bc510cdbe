/*
 * Solver.h
 *
 *  Created on: Sep 6, 2015
 *      Author: Dimitar Gueorguiev
 */

#ifndef SOLVER_H_
#define SOLVER_H_

#include <vector>
#include <map>
#include <list>

#include "Sudoku.h"

using namespace std;

namespace sudoku
{

class Solver
{
protected:
	Puzzle * m_pPuzzle;

	unsigned char m_iDim;
	unsigned char m_iRegionDim;

	HorizLine ** m_pRows;
	VertLine ** m_pCols;
	Region ** m_pRegions;

	void copy_input();
	unsigned char get_region_idx(unsigned char symbolRowIdx, unsigned char symbolColIdx);

public:
    HorizLine ** const getRows() { return m_pRows; }
    VertLine ** const getCols() { return m_pCols; }
    Region ** const getRegions() { return m_pRegions; }


    Solver(Puzzle * puzzle) : m_pPuzzle(puzzle)
    {
    	if (m_pPuzzle != NULL)
    	{
           m_iDim = m_pPuzzle->getDim();
           m_iRegionDim = m_pPuzzle->getRegionDim();

           m_pRows = new HorizLine* [m_iDim];
           m_pCols = new VertLine* [m_iDim];
       	   m_pRegions = new Region* [m_iDim];

       	   for (int i=0; i < m_iDim; i++)
       	   {
       		   m_pRows[i]=NULL;
       		   m_pCols[i]=NULL;
       		   m_pRegions[i]=NULL;
       	   }


           copy_input();
    	}
    }

    bool solve()
    {
    	return false;
    }


};


//
//
//
class BTSolver : public Solver
{
public:

private:

	// the key is the number of choices for value available for the current candidate
	//
	map<unsigned short,list<pair<Symbol*,list<char> > > > m_mRankedCandidates;
};

}


#endif /* SOLVER_H_ */
